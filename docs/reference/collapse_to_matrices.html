<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='A "tidy" data frame contains information that can be collapsed into matrices,
including columns for
matrix names, row names, column names, row types, column types, and values (entries in matrices).
These column names are specified as strings by the matnames, rownames, colnames,
rowtypes, coltypes, and values arguments to collapse_to_matrices(), respectively.
A matsindf-style matrix has named rows and columns.
In addition, matsindf-style matrices have "types" for row and column information,
such as "Commodities", "Industries", "Products", or "Machines".
The row and column types for the matsindf-style matrices are stored as attributes on the matrix
(rowtype and coltype),
which can be accessed with the functions matsbyname::rowtype() and matsbyname::coltype().
Row and column types are both respected and propagated by the various *_byname functions
of the matsbyname package.
Use the *_byname functions when you do operations on the matsindf-style matrices.
The matsindf-style matrices will be stored
in a column with same name as the incoming values column.
This function is similar to tidyr::nest(), which stores data frames into a cell of a data frame.
With collapse_to_matrices, matrices are created.
This function respects groups, like dplyr::summarise().
(In fact, calls to this function may not work properly unless grouping is provided.
Errors of the form "Error: Duplicate identifiers for rows ..." are usually fixed by
grouping .DF prior to calling this function.)
The usual approach is to dplyr::group_by() the matnames column
and any other columns to be preserved in the output.
Note that execution is halted if any of
rownames, colnames, rowtypes, coltypes, or values is a grouping variable in .DF.
rowtypes and coltypes should be the same for all rows of the same matrix in .DF;
execution is halted if that is not the case.
tidyr::pivot_wider()ing the output by matnames may be necessary before
calculations are done on the collapsed matrices.
See the example.'><title>Collapse a "tidy" data frame to matrices in a data frame matsindf) — collapse_to_matrices • matsindf</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Collapse a " tidy data frame to matrices in a matsindf collapse_to_matrices><meta property="og:description" content='A "tidy" data frame contains information that can be collapsed into matrices,
including columns for
matrix names, row names, column names, row types, column types, and values (entries in matrices).
These column names are specified as strings by the matnames, rownames, colnames,
rowtypes, coltypes, and values arguments to collapse_to_matrices(), respectively.
A matsindf-style matrix has named rows and columns.
In addition, matsindf-style matrices have "types" for row and column information,
such as "Commodities", "Industries", "Products", or "Machines".
The row and column types for the matsindf-style matrices are stored as attributes on the matrix
(rowtype and coltype),
which can be accessed with the functions matsbyname::rowtype() and matsbyname::coltype().
Row and column types are both respected and propagated by the various *_byname functions
of the matsbyname package.
Use the *_byname functions when you do operations on the matsindf-style matrices.
The matsindf-style matrices will be stored
in a column with same name as the incoming values column.
This function is similar to tidyr::nest(), which stores data frames into a cell of a data frame.
With collapse_to_matrices, matrices are created.
This function respects groups, like dplyr::summarise().
(In fact, calls to this function may not work properly unless grouping is provided.
Errors of the form "Error: Duplicate identifiers for rows ..." are usually fixed by
grouping .DF prior to calling this function.)
The usual approach is to dplyr::group_by() the matnames column
and any other columns to be preserved in the output.
Note that execution is halted if any of
rownames, colnames, rowtypes, coltypes, or values is a grouping variable in .DF.
rowtypes and coltypes should be the same for all rows of the same matrix in .DF;
execution is halted if that is not the case.
tidyr::pivot_wider()ing the output by matnames may be necessary before
calculations are done on the collapsed matrices.
See the example.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">matsindf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/matsindf.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/iris_pca.html">Using matsindf for principal components analysis</a>
    <a class="dropdown-item" href="../articles/midf_apply_primer.html">A matsindf_apply primer</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MatthewHeun/matsindf/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Collapse a "tidy" data frame to matrices in a data frame <code>matsindf</code>)</h1>
      <small class="dont-index">Source: <a href="https://github.com/MatthewHeun/matsindf/blob/HEAD/R/collapse.R" class="external-link"><code>R/collapse.R</code></a></small>
      <div class="d-none name"><code>collapse_to_matrices.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A "tidy" data frame contains information that can be collapsed into matrices,
including columns for
matrix names, row names, column names, row types, column types, and values (entries in matrices).
These column names are specified as strings by the <code>matnames</code>, <code>rownames</code>, <code>colnames</code>,
<code>rowtypes</code>, <code>coltypes</code>, and <code>values</code> arguments to <code>collapse_to_matrices()</code>, respectively.
A <code>matsindf</code>-style matrix has named rows and columns.
In addition, <code>matsindf</code>-style matrices have "types" for row and column information,
such as "Commodities", "Industries", "Products", or "Machines".
The row and column types for the <code>matsindf</code>-style matrices are stored as attributes on the matrix
(<code>rowtype</code> and <code>coltype</code>),
which can be accessed with the functions <code><a href="https://rdrr.io/pkg/matsbyname/man/rowtype.html" class="external-link">matsbyname::rowtype()</a></code> and <code><a href="https://rdrr.io/pkg/matsbyname/man/coltype.html" class="external-link">matsbyname::coltype()</a></code>.
Row and column types are both respected and propagated by the various <code>*_byname</code> functions
of the <code>matsbyname</code> package.
Use the <code>*_byname</code> functions when you do operations on the <code>matsindf</code>-style matrices.
The <code>matsindf</code>-style matrices will be stored
in a column with same name as the incoming <code>values</code> column.
This function is similar to <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code>, which stores data frames into a cell of a data frame.
With <code>collapse_to_matrices</code>, matrices are created.
This function respects groups, like <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarise()</a></code>.
(In fact, calls to this function may not work properly unless grouping is provided.
Errors of the form "Error: Duplicate identifiers for rows ..." are usually fixed by
grouping <code>.DF</code> prior to calling this function.)
The usual approach is to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code> the <code>matnames</code> column
and any other columns to be preserved in the output.
Note that execution is halted if any of
<code>rownames</code>, <code>colnames</code>, <code>rowtypes</code>, <code>coltypes</code>, or <code>values</code> is a grouping variable in <code>.DF</code>.
<code>rowtypes</code> and <code>coltypes</code> should be the same for all rows of the same matrix in <code>.DF</code>;
execution is halted if that is not the case.
<code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">tidyr::pivot_wider()</a></code>ing the output by <code>matnames</code> may be necessary before
calculations are done on the collapsed matrices.
See the example.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">collapse_to_matrices</span><span class="op">(</span></span>
<span>  <span class="va">.DF</span>,</span>
<span>  matnames <span class="op">=</span> <span class="st">"matnames"</span>,</span>
<span>  matvals <span class="op">=</span> <span class="st">"matvals"</span>,</span>
<span>  rownames <span class="op">=</span> <span class="st">"rownames"</span>,</span>
<span>  colnames <span class="op">=</span> <span class="st">"colnames"</span>,</span>
<span>  rowtypes <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="st">"rowtypes"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">.DF</span><span class="op">)</span><span class="op">)</span> <span class="st">"rowtypes"</span> <span class="kw">else</span> <span class="cn">NULL</span>,</span>
<span>  coltypes <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="st">"coltypes"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">.DF</span><span class="op">)</span><span class="op">)</span> <span class="st">"coltypes"</span> <span class="kw">else</span> <span class="cn">NULL</span>,</span>
<span>  matrix.class <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  matrix_class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"matrix"</span>, <span class="st">"Matrix"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.DF</dt>
<dd><p>the "tidy" data frame</p></dd>


<dt>matnames</dt>
<dd><p>A string identifying the column in <code>.DF</code> containing matrix names for matrices to be created.
Default is "matnames".</p></dd>


<dt>matvals</dt>
<dd><p>A string identifying the column in <code>.DF</code> containing values to be inserted into the matrices to be created.
This will also be the name of the column in the output containing matrices formed from the
data in the <code>matvals</code> column.
Default is "matvals".</p></dd>


<dt>rownames</dt>
<dd><p>A string identifying the column in <code>.DF</code> containing row names for matrices to be created.
Default is "rownames".</p></dd>


<dt>colnames</dt>
<dd><p>A string identifying the column in <code>.DF</code> containing column names for matrices to be created.
Default is "colnames".</p></dd>


<dt>rowtypes</dt>
<dd><p>An optional string identifying the column in <code>.DF</code> containing the type of values in rows of the matrices to be created.
Default is <code>if ("rowtypes" %in% names(.DF)) "rowtypes" else NULL</code>,
so that failure to set the rowtypes argument will give <code>NULL</code>, as appropriate.</p></dd>


<dt>coltypes</dt>
<dd><p>An optional string identifying the column in <code>.DF</code> containing the type of values in columns of the matrices to be created
Default is <code>if ("coltypes" %in% names(.DF)) "rowtypes" else NULL</code>,
so that failure to set the coltypes argument will give <code>NULL</code>, as appropriate.</p></dd>


<dt>matrix.class</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Use <code>matrix_class</code> instead.</p></dd>


<dt>matrix_class</dt>
<dd><p>One of "matrix" or "Matrix".
"matrix" creates a <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">base::matrix</a></code> object with the <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code> function.
"Matrix" creates a <code><a href="https://rdrr.io/pkg/Matrix/man/Matrix.html" class="external-link">Matrix::Matrix</a></code> object using the <code><a href="https://rdrr.io/pkg/matsbyname/man/Matrix.html" class="external-link">matsbyname::Matrix()</a></code> function.
This could be a sparse matrix.
Default is "matrix".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with matrices in the <code>matvals</code> column.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Groups are not preserved on output.</p>
<p>Note that two types of matrices can be created, a <code>matrix</code> or a <code>Matrix</code>.
<code>Matrix</code> has the advantage of representing sparse matrices with less memory
(and disk space).
<code>Matrix</code> objects are created by <code><a href="https://rdrr.io/pkg/matsbyname/man/Matrix.html" class="external-link">matsbyname::Matrix()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarise()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:testthat’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     matches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘tidyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:testthat’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     matches</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ptype</span> <span class="op">&lt;-</span> <span class="st">"Products"</span></span></span>
<span class="r-in"><span><span class="va">itype</span> <span class="op">&lt;-</span> <span class="st">"Industries"</span></span></span>
<span class="r-in"><span><span class="va">tidy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"GH"</span>,  <span class="st">"GH"</span>,  <span class="st">"GH"</span>,  <span class="st">"GH"</span>,  <span class="st">"GH"</span>,  <span class="st">"GH"</span>,  <span class="st">"GH"</span>,</span></span>
<span class="r-in"><span>                                <span class="st">"US"</span>,  <span class="st">"US"</span>,  <span class="st">"US"</span>,  <span class="st">"US"</span>, <span class="st">"GH"</span>, <span class="st">"US"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  Year    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>  <span class="fl">1971</span>,  <span class="fl">1971</span>,  <span class="fl">1971</span>,  <span class="fl">1971</span>,  <span class="fl">1971</span>,  <span class="fl">1971</span>,  <span class="fl">1971</span>,</span></span>
<span class="r-in"><span>                                <span class="fl">1980</span>,  <span class="fl">1980</span>,  <span class="fl">1980</span>,  <span class="fl">1980</span>, <span class="fl">1971</span>, <span class="fl">1980</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  matrix  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>   <span class="st">"U"</span>,   <span class="st">"U"</span>,   <span class="st">"E"</span>,   <span class="st">"E"</span>,   <span class="st">"E"</span>,   <span class="st">"V"</span>,   <span class="st">"V"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"U"</span>,   <span class="st">"U"</span>,   <span class="st">"E"</span>,   <span class="st">"E"</span>, <span class="st">"eta"</span>, <span class="st">"eta"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  row     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"c 1"</span>, <span class="st">"c 2"</span>, <span class="st">"c 1"</span>, <span class="st">"c 2"</span>, <span class="st">"c 2"</span>, <span class="st">"i 1"</span>, <span class="st">"i 2"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"c 1"</span>, <span class="st">"c 1"</span>, <span class="st">"c 1"</span>, <span class="st">"c 2"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  col     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"i 1"</span>, <span class="st">"i 2"</span>, <span class="st">"i 1"</span>, <span class="st">"i 2"</span>, <span class="st">"i 3"</span>, <span class="st">"c 1"</span>, <span class="st">"c 2"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"i 1"</span>, <span class="st">"i 2"</span>, <span class="st">"i 1"</span>, <span class="st">"i 2"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  rowtypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="va">itype</span>, <span class="va">itype</span>,</span></span>
<span class="r-in"><span>                                <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="va">ptype</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  coltypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="va">itype</span>, <span class="va">itype</span>, <span class="va">itype</span>, <span class="va">itype</span>, <span class="va">itype</span>, <span class="va">ptype</span>, <span class="va">ptype</span>,</span></span>
<span class="r-in"><span>                                <span class="va">itype</span>, <span class="va">itype</span>, <span class="va">itype</span>, <span class="va">itype</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  vals  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>    <span class="fl">11</span>  ,  <span class="fl">22</span>,    <span class="fl">11</span> ,   <span class="fl">22</span> ,   <span class="fl">23</span> ,   <span class="fl">11</span> ,   <span class="fl">22</span> ,</span></span>
<span class="r-in"><span>                                <span class="fl">11</span> ,   <span class="fl">12</span> ,   <span class="fl">11</span> ,   <span class="fl">22</span>,   <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Country</span>, <span class="va">Year</span>, <span class="va">matrix</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mats</span> <span class="op">&lt;-</span> <span class="fu">collapse_to_matrices</span><span class="op">(</span><span class="va">tidy</span>, matnames <span class="op">=</span> <span class="st">"matrix"</span>, matvals <span class="op">=</span> <span class="st">"vals"</span>,</span></span>
<span class="r-in"><span>                             rownames <span class="op">=</span> <span class="st">"row"</span>, colnames <span class="op">=</span> <span class="st">"col"</span>,</span></span>
<span class="r-in"><span>                             rowtypes <span class="op">=</span> <span class="st">"rowtypes"</span>, coltypes <span class="op">=</span> <span class="st">"coltypes"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mats</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">matrix</span>, values_from <span class="op">=</span> <span class="va">vals</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country  Year E             U             V             eta      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> GH       <span style="text-decoration: underline;">1</span>971 <span style="color: #949494;">&lt;dbl [2 × 3]&gt;</span> <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl [1]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> US       <span style="text-decoration: underline;">1</span>980 <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl [1 × 2]&gt;</span> <span style="color: #949494;">&lt;NULL&gt;</span>        <span style="color: #949494;">&lt;dbl [1]&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

