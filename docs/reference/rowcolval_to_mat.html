<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Collapse a tidy data frame into a matrix with named rows and columns — rowcolval_to_mat • matsindf</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Collapse a tidy data frame into a matrix with named rows and columns — rowcolval_to_mat" />
<meta property="og:description" content="Columns not specified in one of rownames, colnames, rowtype, coltype, or values
are silently dropped.
rowtypes and coltypes are added as attributes to the resulting matrix
(via setrowtype and setcoltype).
The resulting matrix is a (under the hood) a data frame.
If both rownames and colnames columns of .DF contain NA,
it is assumed that this is a single value, not a matrix,
in which case the value in the values column is returned." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matsindf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/matsindf.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/midf_apply_primer.html">A matsindf_apply primer</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/MatthewHeun/matsindf">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Collapse a tidy data frame into a matrix with named rows and columns</h1>
    <small class="dont-index">Source: <a href='https://github.com/MatthewHeun/matsindf/blob/master/R/utilities.R'><code>R/utilities.R</code></a></small>
    <div class="hidden name"><code>rowcolval_to_mat.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Columns not specified in one of <code>rownames</code>, <code>colnames</code>, <code>rowtype</code>, <code>coltype</code>, or <code>values</code>
are silently dropped.
<code>rowtypes</code> and <code>coltypes</code> are added as attributes to the resulting matrix
(via <code>setrowtype</code> and <code>setcoltype</code>).
The resulting matrix is a (under the hood) a data frame.
If both <code>rownames</code> and <code>colnames</code> columns of <code>.DF</code> contain <code>NA</code>,
it is assumed that this is a single value, not a matrix,
in which case the value in the <code>values</code> column is returned.</p>
    </div>

    <pre class="usage"><span class='fu'>rowcolval_to_mat</span>(
  <span class='no'>.DF</span>,
  <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"matvals"</span>,
  <span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rownames"</span>,
  <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"colnames"</span>,
  <span class='kw'>rowtypes</span> <span class='kw'>=</span> <span class='st'>"rowtypes"</span>,
  <span class='kw'>coltypes</span> <span class='kw'>=</span> <span class='st'>"coltypes"</span>,
  <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fl'>0</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.DF</th>
      <td><p>a tidy data frame containing columns for row names, column names, and values</p></td>
    </tr>
    <tr>
      <th>matvals</th>
      <td><p>the name of the column in <code>.DF</code> containing values with which to fill the matrix (a string). Default is "<code>matvals</code>".</p></td>
    </tr>
    <tr>
      <th>rownames</th>
      <td><p>the name of the column in <code>.DF</code> containing row names (a string). Default is "<code>rownames</code>".</p></td>
    </tr>
    <tr>
      <th>colnames</th>
      <td><p>the name of the column in <code>.DF</code> containing column names (a string). Default is "<code>colnames</code>".</p></td>
    </tr>
    <tr>
      <th>rowtypes</th>
      <td><p>an optional string identifying the types of information found in rows of the matrix to be constructed. Default is "<code>rowtypes</code>".</p></td>
    </tr>
    <tr>
      <th>coltypes</th>
      <td><p>an optional string identifying the types of information found in columns of the matrix to be constructed. Default is "<code>coltypes</code>".</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>the value for missing entries in the resulting matrix. default is <code>0</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a matrix with named rows and columns and, optionally, row and column types</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>matsbyname</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>Country</span>  <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"GH"</span>, <span class='st'>"GH"</span>, <span class='st'>"GH"</span>),
                   <span class='kw'>rows</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>( <span class='st'>"c 1"</span>,  <span class='st'>"c 1"</span>, <span class='st'>"c 2"</span>),
                   <span class='kw'>cols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>( <span class='st'>"i 1"</span>,  <span class='st'>"i 2"</span>, <span class='st'>"i 2"</span>),
                   <span class='kw'>vals</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(   <span class='fl'>11</span>  ,   <span class='fl'>12</span>,    <span class='fl'>22</span> ))
<span class='no'>A</span> <span class='kw'>&lt;-</span> <span class='fu'>rowcolval_to_mat</span>(<span class='no'>data</span>, <span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rows"</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"cols"</span>, <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"vals"</span>)
<span class='no'>A</span></div><div class='output co'>#&gt;     i 1 i 2
#&gt; c 1  11  12
#&gt; c 2   0  22
#&gt; attr(,"rowtype")
#&gt; [1] "rowtypes"
#&gt; attr(,"coltype")
#&gt; [1] "coltypes"</div><div class='input'><span class='fu'><a href='https://rdrr.io/pkg/matsbyname/man/rowtype.html'>rowtype</a></span>(<span class='no'>A</span>) <span class='co'># NULL, because types not set</span></div><div class='output co'>#&gt; [1] "rowtypes"</div><div class='input'><span class='fu'><a href='https://rdrr.io/pkg/matsbyname/man/coltype.html'>coltype</a></span>(<span class='no'>A</span>) <span class='co'># NULL, because types not set</span></div><div class='output co'>#&gt; [1] "coltypes"</div><div class='input'><span class='no'>B</span> <span class='kw'>&lt;-</span> <span class='fu'>rowcolval_to_mat</span>(<span class='no'>data</span>, <span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rows"</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"cols"</span>, <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"vals"</span>,
                            <span class='kw'>rowtypes</span>  <span class='kw'>=</span> <span class='st'>"Commodities"</span>, <span class='kw'>coltypes</span>  <span class='kw'>=</span> <span class='st'>"Industries"</span>)
<span class='no'>B</span></div><div class='output co'>#&gt;     i 1 i 2
#&gt; c 1  11  12
#&gt; c 2   0  22
#&gt; attr(,"rowtype")
#&gt; [1] "Commodities"
#&gt; attr(,"coltype")
#&gt; [1] "Industries"</div><div class='input'><span class='no'>C</span> <span class='kw'>&lt;-</span> <span class='no'>data</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind.html'>bind_cols</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>rt</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Commodities"</span>, <span class='st'>"Commodities"</span>, <span class='st'>"Commodities"</span>),
                                   <span class='kw'>ct</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Industries"</span>, <span class='st'>"Industries"</span>, <span class='st'>"Industries"</span>))) <span class='kw'>%&gt;%</span>
  <span class='fu'>rowcolval_to_mat</span>(<span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rows"</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"cols"</span>, <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"vals"</span>,
                   <span class='kw'>rowtypes</span> <span class='kw'>=</span> <span class='st'>"rt"</span>, <span class='kw'>coltypes</span> <span class='kw'>=</span> <span class='st'>"ct"</span>)
<span class='no'>C</span></div><div class='output co'>#&gt;     i 1 i 2
#&gt; c 1  11  12
#&gt; c 2   0  22
#&gt; attr(,"rowtype")
#&gt; [1] "Commodities"
#&gt; attr(,"coltype")
#&gt; [1] "Industries"</div><div class='input'><span class='co'># Also works for single values if both the rownames and colnames columns contain NA</span>
<span class='no'>data2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>Country</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"GH"</span>), <span class='kw'>rows</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>), <span class='kw'>cols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>),
  <span class='kw'>rowtypes</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>), <span class='kw'>coltypes</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>), <span class='kw'>vals</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>))
<span class='no'>data2</span> <span class='kw'>%&gt;%</span> <span class='fu'>rowcolval_to_mat</span>(<span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rows"</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"cols"</span>, <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"vals"</span>,
  <span class='kw'>rowtypes</span> <span class='kw'>=</span> <span class='st'>"rowtypes"</span>, <span class='kw'>coltypes</span> <span class='kw'>=</span> <span class='st'>"coltypes"</span>)</div><div class='output co'>#&gt; [1] 2</div><div class='input'><span class='no'>data3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>Country</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"GH"</span>), <span class='kw'>rows</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>), <span class='kw'>cols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>), <span class='kw'>vals</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>))
<span class='no'>data3</span> <span class='kw'>%&gt;%</span> <span class='fu'>rowcolval_to_mat</span>(<span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rows"</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"cols"</span>, <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"vals"</span>)</div><div class='output co'>#&gt; [1] 2</div><div class='input'><span class='co'># Fails when rowtypes or coltypes not all same. In data3, column rt is not all same.</span>
<span class='no'>data4</span> <span class='kw'>&lt;-</span> <span class='no'>data</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind.html'>bind_cols</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>rt</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Commodities"</span>, <span class='st'>"Industries"</span>, <span class='st'>"Commodities"</span>),
                                       <span class='kw'>ct</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Industries"</span>, <span class='st'>"Industries"</span>, <span class='st'>"Industries"</span>)))
<span class='fu'>rowcolval_to_mat</span>(<span class='no'>data4</span>, <span class='kw'>rownames</span> <span class='kw'>=</span> <span class='st'>"rows"</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='st'>"cols"</span>,
                           <span class='kw'>matvals</span> <span class='kw'>=</span> <span class='st'>"vals"</span>, <span class='kw'>rowtypes</span> <span class='kw'>=</span> <span class='st'>"rt"</span>, <span class='kw'>coltypes</span> <span class='kw'>=</span> <span class='st'>"ct"</span>)</div><div class='output co'>#&gt; <span class='error'>Error in rowcolval_to_mat(data4, rownames = "rows", colnames = "cols",     matvals = "vals", rowtypes = "rt", coltypes = "ct"): Not all values in rt (rowtype) were same as first entry: Commodities</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


